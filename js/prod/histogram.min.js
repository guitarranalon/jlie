var histogramModule=(function(){var g,l,h,j,f,b,k,o,m,p,n,i,a={red:["#000","#f00"],green:["#000","#0f0"],blue:["#000","#00f"],hue:["#f00","#ff0","#0f0","#0ff","#00f","#f0f","#f00"],val:["#000","#fff"],kelvin:["#fff","#000"],cyan:["#000","#0ff"],yellow:["#000","#ff0"],magenta:["#000","#f0f"]},c;var e=function(z){var q=[[]],v=0,s,x=[z];if(z==="rgb"){q=[[],[],[]];x=["red","green","blue"]}else{if(z==="cmyk"){q=[[],[],[],[]];x=["cyan","magenta","yellow","kelvin"]}}var t=f;if(isNaN(t)||t<1){t=1}else{if(t>50){t=50}}f=t;t*=4;for(var w=0,r=b.length;w<r;w+=t){if(z==="rgb"||z==="red"||z==="green"||z==="blue"){s=[b[w],b[w+1],b[w+2]]}else{if(z==="cmyk"||z==="cyan"||z==="magenta"||z==="yellow"||z==="kelvin"){s=rgb2cmyk(b[w],b[w+1],b[w+2])}else{if(z==="hue"||z==="sat"||z==="val"){s=rgb2hsv(b[w],b[w+1],b[w+2])}}}if(z==="red"||z==="hue"||z==="cyan"){s=[s[0]]}else{if(z==="green"||z==="sat"||z==="magenta"){s=[s[1]]}else{if(z==="blue"||z==="val"||z==="yellow"){s=[s[2]]}else{if(z==="kelvin"){s=[s[3]]}}}}for(var A=0,u=s.length;A<u;A++){if(s[A] in q[A]){q[A][s[A]]++}else{q[A][s[A]]=1}if((q[A][s[A]]>v)&&(s[A]!=0)&&(s[A]!=255)){v=q[A][s[A]]}}}if(v===0){return}h.clearRect(0,0,l.width,l.height);if(o&&q.length>1){h.globalCompositeOperation="lighter"}for(var w=0,r=q.length;w<r;w++){d(x[w],q[w],v)}if(o&&q.length>1){h.globalCompositeOperation="source-over"}};var d=function(s,v,u){var t;if(o||k==="discreet"){t="fillStyle";h.strokeStyle="#000"}else{t="strokeStyle"}if(m==="flat"){if(s==="hue"){h[t]=i.hue}else{if(s in a&&s!=="val"){h[t]=a[s][1]}else{h[t]="#000"}}}else{if(m==="gradient"){if(s in i){h[t]=i[s]}else{h[t]="#000"}}else{if(m==="none"){h[t]="#000"}}}if(k==="continuous"){h.beginPath();h.moveTo(0,l.height)}for(var q,w,r=0;r<=255;r++){if(!(r in v)){continue}w=Math.round((v[r]/u)*l.height);q=Math.round((r/255)*l.width);if(k==="continuous"){h.lineTo(q,l.height-w)}else{if(k==="discreet"){if(o){h.fillRect(q,l.height-w,c,w)}else{h.fillRect(q,l.height-w,c,2)}}}}if(k==="continuous"){h.lineTo(q,l.height);if(o){h.fill()}h.stroke();h.closePath()}};return{init:function(r,q){g=$("footer").get(0);l=r;h=l.getContext("2d");i={red:h.createLinearGradient(0,0,q,0),green:h.createLinearGradient(0,0,q,0),blue:h.createLinearGradient(0,0,q,0),hue:h.createLinearGradient(0,0,q,0),val:h.createLinearGradient(0,0,q,0),cyan:h.createLinearGradient(0,0,q,0),magenta:h.createLinearGradient(0,0,q,0),yellow:h.createLinearGradient(0,0,q,0),kelvin:h.createLinearGradient(0,0,q,0)};c=Math.round(l.width/255)},updateHist:function(s,q,v,u,t,r){j=s;f=q;b=v;o=u;k=t;m=r;e(j)}}})();