$(document).ready(function(){var a=(function(){var f,g,c,b={exposure:0,contrast:0,brightness:0,vibrance:0,saturation:0,sharpen:0};var i=function(k,l){$(this).find(".parameter").text(l.value)};var e=function(){c.revert(function(){filterChain.handleFilter(c,b);c.render(h)})};var j=function(){$("#expo").slider({step:1,value:0,min:-100,max:100,slide:i,change:function(k,l){b.exposure=l.value;e()}});$("#brightness").slider({step:1,value:0,min:-100,max:100,slide:i,change:function(k,l){b.brightness=l.value;e()}});$("#contrast").slider({step:1,value:0,min:-100,max:100,slide:i,change:function(k,l){b.contrast=l.value;e()}});$("#vibrance").slider({step:1,value:0,min:-100,max:100,slide:i,change:function(k,l){b.vibrance=l.value;e()}});$("#saturation").slider({step:1,value:0,min:-100,max:100,slide:i,change:function(k,l){b.saturation=l.value;e()}});$("#sharpen").slider({step:1,value:0,min:-100,max:100,slide:i,change:function(k,l){b.sharpen=l.value;e()}});$("#controls .parameter").html("0")};var d=function(){$("#save").click(function(k){k.preventDefault();c.save()});$("#reset").click(function(k){k.preventDefault();a.initElements()})};var h=function(){var k=document.getElementById("photo").getContext("2d").getImageData(0,0,469,232).data;histogramModule.updateHist("rgb",10,k,true,"discreet","flat")};return{init:function(l,k){f=l;g=k},initElements:function(){var k=$("#hist-canvas")[0];histogramModule.init(k,k.width);c=Caman(g,f,function(){this.render(h)});j();d()}}})();a.init("#photo","xago-beach1.JPG");a.initElements()});